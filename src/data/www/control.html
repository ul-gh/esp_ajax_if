<!DOCTYPE html><!--Needs HTML5 + ES7 JavaScript-->
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Main Page</title>
        <link rel="stylesheet" type="text/css" href="u_lukas_style.css">
        <script>
            async function submit_formdata(event) {
                const form_data = new FormData(event.target);
                form_data.forEach(console.log);
                let req_str = "cmd?" + new URLSearchParams(form_data).toString();
                console.log(req_str);
                try {
                    let response = await fetch(req_str);
                    alert(await response.text());
                } catch (err) {
                    console.error(err);
                }
            }
            document.addEventListener("submit", submit_formdata, true);
        </script>
    </head>
    <body>
        <img src="logo.svg" alt="Application Logo">

        <form name="dead_time_settings">
            <table>
                <caption>Click the "Submit" button to update settings
                    for the remote component!</caption>
                <thead>
                    <tr>
                        <th colspan="4">Dead Time Settings</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Lag Leg (ZCS) Dead Time /ns:</td>
                        <td><input type="number" name="lag_dt" value="125"
                                min="6.25" max="1000" step="6.25"></td>
                    </tr>
                    <tr>
                        <td>Lead Leg (ZVS) Dead Time /ns:</td>
                        <td><input type="number" name="lead_dt" value="125"
                                min="6.25" max="1000" step="6.25"></td>
                    </tr>
                    <td colspan="2"><input type="submit" value="Submit"></td>
                    </tr>
                </tbody>
            </table>
        </form>

        <form name="operation_settings">
            <table>
                <thead>
                    <tr>
                        <th colspan="2">Operation Settings</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Frequency /kHz:</td>
                        <td><input type="number" name="set_freq"
                                value="100" min="5" max="1000"></td>
                    </tr>
                    <tr>
                        <td>Duty Cycle /%:</td>
                        <td><input type="number" name="set_duty"
                                value="45" min="0" max="100"></td>
                    </tr>
                    <td colspan="2"><input type="submit" value="Submit"></td>
                    </tr>
                </tbody>
            </table>
        </form>
        <br>

        <form name="limit_values">
            <table>
                <thead>
                    <tr>
                        <th colspan="2">Limit Values</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Current Limit /A:</td>
                        <td><input type="number" name="set_curr_limit"
                                                 value="35" min="5" max="100"></td>
                    </tr>
                    <td colspan="2"><input type="submit" value="Submit"></td>
                    </tr>
                </tbody>
            </table>
        </form>
        <br><br>

        <form name="activate_outputs">
            <table>
                <thead>
                    <tr>
                        <th colspan="2">Activate Outputs</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input type="submit" id="btn_on" class="button_large"
                                    name="set_output" value="ON"></td>
                        <td><input type="submit" id="btn_off" class="button_large"
                                    name="set_output" value="OFF"></td>
                    </tr>
                </tbody>
            </table>
        </form>

        <p>2019-10-31 Ulrich Lukas</p>
        <a href="update.html">Perform OTA Firmware Upload</a>
    </body>
</html>
