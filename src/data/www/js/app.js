(function(e){function t(t){for(var a,s,c=t[0],r=t[1],u=t[2],d=0,o=[];d<c.length;d++)s=c[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&o.push(i[s][0]),i[s]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);b&&b(t);while(o.length)o.shift()();return l.push.apply(l,u||[]),n()}function n(){for(var e,t=0;t<l.length;t++){for(var n=l[t],a=!0,c=1;c<n.length;c++){var r=n[c];0!==i[r]&&(a=!1)}a&&(l.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},i={app:0},l=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/static/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var b=r;l.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"3eef":function(e,t,n){},"4c1c":function(e,t,n){"use strict";n("3eef")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23"),i=n("9b19"),l=n.n(i),s=Object(a["f"])("img",{alt:"Application Logo",style:{height:"3rem"},src:l.a},null,-1);function c(e,t,n,i,l,c){var r=Object(a["j"])("EspAjaxLabMain");return Object(a["g"])(),Object(a["c"])(a["a"],null,[s,Object(a["f"])(r,{ref:"eal",state:l.state,disabled:l.disabled,view_updates_inhibited:l.view_updates_inhibited,onSubmit_cmd:c.submit_cmd},null,8,["state","disabled","view_updates_inhibited","onSubmit_cmd"])],64)}n("a9e3"),n("b680");var r=Object(a["l"])("data-v-38238978");Object(a["i"])("data-v-38238978");var u={class:"esp_ajax_lab"},b={class:"grid_container main_grid"},d={class:"grid_item lr_center"},o=Object(a["f"])("thead",null,[Object(a["f"])("tr",null,[Object(a["f"])("th",{colspan:"3"},"Operation Status")])],-1),_=Object(a["f"])("tr",null,[Object(a["f"])("td",null,"Network Connection"),Object(a["f"])("td",null,"Power Output State"),Object(a["f"])("td",null,"HW Error Shutdown")],-1),f={style:{"white-space":"pre"}},p={style:{"white-space":"pre"}},m={key:0,style:{"white-space":"pre"}},O={class:"grid_item lr_center"},j=Object(a["f"])("thead",null,[Object(a["f"])("tr",null,[Object(a["f"])("th",{colspan:"3"},"Temperatures and Fan")])],-1),h=Object(a["f"])("tr",null,[Object(a["f"])("td",null,"Heatsink 1 Temp"),Object(a["f"])("td",null,"Heatsink 2 Temp"),Object(a["f"])("td",null,"Fan Override ON")],-1),v={class:"toggle-switchy"},g=Object(a["f"])("span",{class:"toggle"},[Object(a["f"])("span",{class:"switch"})],-1),w={class:"grid_item lr_center"},y=Object(a["f"])("thead",null,[Object(a["f"])("tr",null,[Object(a["f"])("th",{colspan:"2"},"Dead Time Settings"),Object(a["f"])("th",{colspan:"1"},"All Settings")])],-1),x=Object(a["f"])("tr",null,[Object(a["f"])("td",null,"Lead (ZVS) DT /ns"),Object(a["f"])("td",null,"Lag (ZCS) DT /ns"),Object(a["f"])("td",null,"Save All Settings")],-1),k={class:"grid_item lr_center"},S=Object(a["f"])("thead",null,[Object(a["f"])("tr",null,[Object(a["f"])("th",{colspan:"3"},"Limit Values")])],-1),C=Object(a["f"])("tr",null,[Object(a["f"])("td",null,"Current Limit /A"),Object(a["f"])("td",null,"Frequency MIN /kHz"),Object(a["f"])("td",null,"Frequency MAX /kHz")],-1),N={class:"grid_item lr_center"},q=Object(a["f"])("thead",null,[Object(a["f"])("tr",null,[Object(a["f"])("th",{colspan:"2"},"Operation Settings")])],-1),E={class:"alternating_bg"},T=Object(a["f"])("td",null,"Frequency /kHz:",-1),L={class:"alternating_bg"},P={colspan:"2"},F={class:"alternating_bg"},A=Object(a["f"])("td",null,"Duty Cycle /%:",-1),M={class:"alternating_bg"},B={colspan:"2"},R={class:"grid_item lr_center"},H=Object(a["f"])("thead",null,[Object(a["f"])("tr",null,[Object(a["f"])("th",{colspan:"3"},"Power Output Switches")])],-1),D=Object(a["f"])("tr",null,[Object(a["f"])("td",null,"Power PWM"),Object(a["f"])("td",null,"REF/CAL Load"),Object(a["f"])("td",null,"DUT Output")],-1),W={style:{"white-space":"nowrap"}},z={class:"toggle-switchy ajax_btn","data-size":"lg"},U=Object(a["f"])("span",{class:"toggle"},[Object(a["f"])("span",{class:"switch"})],-1),I={class:"toggle-switchy ajax_btn","data-size":"lg"},J=Object(a["f"])("span",{class:"toggle"},[Object(a["f"])("span",{class:"switch"})],-1),$={class:"grid_item lr_center"},G=Object(a["f"])("thead",null,[Object(a["f"])("tr",null,[Object(a["f"])("th",{colspan:"2"},"Output Interval Timer")])],-1),V=Object(a["f"])("tr",null,[Object(a["f"])("td",null,"Pulse Length /sec"),Object(a["f"])("td",null,"Trigger One-Shot")],-1),Z=Object(a["f"])("p",null,[Object(a["f"])("a",{href:"update.html"},"Perform OTA Firmware Upload")],-1),K=Object(a["f"])("p",null,"2020-11-18 Ulrich Lukas",-1);Object(a["h"])();var X=r((function(e,t,n,i,l,s){return Object(a["g"])(),Object(a["c"])("div",u,[Object(a["f"])("ul",b,[Object(a["f"])("li",d,[Object(a["f"])("table",null,[o,Object(a["f"])("tbody",null,[_,Object(a["f"])("tr",null,[Object(a["f"])("td",null,[Object(a["f"])("div",{class:"flex-centered state_vw",id:"connection_vw",active:s.set_if(!n.disabled)},[Object(a["f"])("span",f,Object(a["k"])(n.disabled?"No Connection\nto Hardware!":"OK"),1)],8,["active"])]),Object(a["f"])("td",null,[Object(a["f"])("div",{class:"flex-centered state_vw",id:"power_pwm_vw",disabled:s.set_if(n.disabled),active:s.set_if(n.state.power_pwm_active)},[Object(a["f"])("span",p,Object(a["k"])(n.state.power_pwm_active?"Power PWM ON":"Power PWM OFF"),1)],8,["disabled","active"])]),Object(a["f"])("td",null,[Object(a["f"])("div",{class:"flex-centered state_vw ajax_btn",id:"shutdown_vw",name:"clear_shutdown",value:"true",disabled:s.set_if(n.disabled),hw_oc_fault_occurred:s.set_if(n.state.hw_oc_fault_occurred),hw_oc_fault_present:s.set_if(n.state.hw_oc_fault_present)},[n.disabled?Object(a["d"])("",!0):(Object(a["g"])(),Object(a["c"])("span",m,Object(a["k"])(n.state.hw_oc_fault_present?"HW OC FAULT\nClick here to Reset!":"")+" "+Object(a["k"])(n.state.hw_oc_fault_occurred&&!n.state.hw_oc_fault_present?"HW OC fault latched!\nClick here to Reset!":"")+" "+Object(a["k"])(n.state.hw_oc_fault_occurred||n.state.hw_oc_fault_present?"":"State: Normal"),1)),Object(a["e"])(" "+Object(a["k"])(n.disabled?"Unknown..":""),1)],8,["disabled","hw_oc_fault_occurred","hw_oc_fault_present"])])])])])]),Object(a["f"])("li",O,[Object(a["f"])("table",null,[j,Object(a["f"])("tbody",null,[h,Object(a["f"])("tr",null,[Object(a["f"])("td",null,[Object(a["f"])("div",{class:"flex-centered number_vw",disabled:s.set_if(n.disabled)},Object(a["k"])(n.state.aux_temp.toFixed(1)+" °C"),9,["disabled"])]),Object(a["f"])("td",null,[Object(a["f"])("div",{class:"flex-centered number_vw",disabled:s.set_if(n.disabled)},Object(a["k"])(n.state.heatsink_temp.toFixed(1)+" °C"),9,["disabled"])]),Object(a["f"])("td",null,[Object(a["f"])("label",v,[Object(a["f"])("input",{type:"checkbox",name:"set_fan_override",onChange:t[1]||(t[1]=function(){return s.submit_btn&&s.submit_btn.apply(s,arguments)}),disabled:n.disabled},null,40,["disabled"]),g])])])])])]),Object(a["f"])("li",w,[Object(a["f"])("table",null,[y,Object(a["f"])("tbody",null,[x,Object(a["f"])("tr",null,[Object(a["f"])("td",null,[Object(a["f"])("input",{type:"number",name:"set_lead_dt",value:"125",min:"6",max:"1000",onChange:t[2]||(t[2]=function(){return s.submit_number&&s.submit_number.apply(s,arguments)}),disabled:n.disabled},null,40,["disabled"])]),Object(a["f"])("td",null,[Object(a["f"])("input",{type:"number",name:"set_lag_dt",value:"125",min:"6",max:"1000",onChange:t[3]||(t[3]=function(){return s.submit_number&&s.submit_number.apply(s,arguments)}),disabled:n.disabled},null,40,["disabled"])]),Object(a["f"])("td",null,[Object(a["f"])("button",{class:"ajax_btn",id:"btn_save_settings",name:"save_settings",value:"true",onChange:t[4]||(t[4]=function(){return s.submit_btn&&s.submit_btn.apply(s,arguments)}),disabled:n.disabled}," Save! ",40,["disabled"])])])])])]),Object(a["f"])("li",k,[Object(a["f"])("table",null,[S,Object(a["f"])("tbody",null,[C,Object(a["f"])("tr",null,[Object(a["f"])("td",null,[Object(a["f"])("input",{type:"number",name:"set_current_limit",value:"8",min:"0",max:"100",step:"1",onChange:t[5]||(t[5]=function(){return s.submit_number&&s.submit_number.apply(s,arguments)}),disabled:n.disabled},null,40,["disabled"])]),Object(a["f"])("td",null,[Object(a["f"])("input",{type:"number",name:"set_frequency_min",value:"100",min:"5",max:"2000",step:"1",onChange:t[6]||(t[6]=function(){return s.submit_number&&s.submit_number.apply(s,arguments)}),disabled:n.disabled},null,40,["disabled"])]),Object(a["f"])("td",null,[Object(a["f"])("input",{type:"number",name:"set_frequency_max",value:"300",min:"5",max:"2000",step:"1",onChange:t[7]||(t[7]=function(){return s.submit_number&&s.submit_number.apply(s,arguments)}),disabled:n.disabled},null,40,["disabled"])])])])])]),Object(a["f"])("li",N,[Object(a["f"])("table",null,[q,Object(a["f"])("tbody",null,[Object(a["f"])("tr",E,[T,Object(a["f"])("td",null,[Object(a["f"])("input",{type:"number",name:"set_frequency",value:"100",min:"5",max:"1000",step:"1",onChange:t[8]||(t[8]=function(){return s.submit_number&&s.submit_number.apply(s,arguments)}),disabled:n.disabled},null,40,["disabled"])])]),Object(a["f"])("tr",L,[Object(a["f"])("td",P,[Object(a["f"])("input",{type:"range",name:"set_frequency",value:"100",min:"5",max:"1000",step:"1",onChange:t[9]||(t[9]=function(){return s.submit_number&&s.submit_number.apply(s,arguments)}),disabled:n.disabled},null,40,["disabled"])])]),Object(a["f"])("tr",F,[A,Object(a["f"])("td",null,[Object(a["f"])("input",{type:"number",name:"set_duty",value:"45.0",min:"0",max:"100",step:"0.1",onChange:t[10]||(t[10]=function(){return s.submit_number&&s.submit_number.apply(s,arguments)}),disabled:n.disabled},null,40,["disabled"])])]),Object(a["f"])("tr",M,[Object(a["f"])("td",B,[Object(a["f"])("input",{type:"range",name:"set_duty",value:"45.0",min:"0",max:"100",step:"0.1",onChange:t[11]||(t[11]=function(){return s.submit_number&&s.submit_number.apply(s,arguments)}),disabled:n.disabled},null,40,["disabled"])])])])])]),Object(a["f"])("li",R,[Object(a["f"])("table",null,[H,Object(a["f"])("tbody",null,[D,Object(a["f"])("tr",null,[Object(a["f"])("td",null,[Object(a["f"])("span",W,[Object(a["f"])("button",{class:"ajax_btn",id:"btn_pwm_on",name:"set_power_pwm_active",value:"true",disabled:n.disabled}," ON ",8,["disabled"]),Object(a["f"])("button",{class:"ajax_btn",id:"btn_pwm_off",name:"set_power_pwm_active",value:"false",disabled:n.disabled}," OFF ",8,["disabled"])])]),Object(a["f"])("td",null,[Object(a["f"])("label",z,[Object(a["f"])("input",{type:"checkbox",name:"set_relay_ref_active",disabled:n.disabled},null,8,["disabled"]),U])]),Object(a["f"])("td",null,[Object(a["f"])("label",I,[Object(a["f"])("input",{type:"checkbox",name:"set_relay_dut_active",disabled:n.disabled},null,8,["disabled"]),J])])])])])]),Object(a["f"])("li",$,[Object(a["f"])("table",null,[G,Object(a["f"])("tbody",null,[V,Object(a["f"])("tr",null,[Object(a["f"])("td",null,[Object(a["f"])("input",{type:"number",id:"oneshot_len_vw",name:"set_oneshot_len",value:"0.0",min:"0",max:"1800",step:"0.001",onChange:t[12]||(t[12]=function(){return s.submit_number&&s.submit_number.apply(s,arguments)}),disabled:n.disabled},null,40,["disabled"])]),Object(a["f"])("td",null,[Object(a["f"])("button",{class:"ajax_btn",id:"btn_trigger_oneshot",name:"trigger_oneshot",value:"true",disabled:n.disabled}," TRIGGER! ",8,["disabled"])])])])])])]),Z,K])})),Q=(n("b0c0"),{name:"EspAjaxLabMain",data:function(){return{}},props:{state:Object,view_updates_inhibited:Boolean,disabled:Boolean},methods:{set_if:function(e){return e?"":void 0},submit_number:function(e){this.$emit("submit_cmd",e.target.name,Number(e.target.value))},submit_btn:function(e){this.$emit("submit_cmd",e.target.name,!e.target.value)}},emits:["submit_cmd"]});n("ffb3"),n("4c1c");Q.render=X,Q.__scopeId="data-v-38238978";var Y=Q,ee=(n("d3b7"),n("96cf"),n("1da1")),te=n("d4ec"),ne=n("bee2"),ae=300,ie=3e3,le=function(){function e(t){Object(te["a"])(this,e),this._req_start_str=t+"?",this._rate_limit_active=!1,this._pending_req_str=""}return Object(ne["a"])(e,[{key:"do_http_request",value:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(t){var n,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this._rate_limit_active){e.next=3;break}return this._pending_req_str=t,e.abrupt("return");case 3:if(t){e.next=10;break}if(!this._pending_req_str){e.next=9;break}t=this._pending_req_str,this._pending_req_str="",e.next=10;break;case 9:return e.abrupt("return");case 10:return this._rate_limit_active=!0,setTimeout((function(){a._rate_limit_active=!1,a.do_http_request("")}),ae),e.prev=12,e.next=15,fetch(t);case 15:if(n=e.sent,n.ok){e.next=18;break}throw new Error("Network error.");case 18:e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](12),alert(e.t0);case 23:case"end":return e.stop()}}),e,this,[[12,20]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"send_cmd",value:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=this._req_start_str+t+"="+n,e.next=3,this.do_http_request(a);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),e}(),se=function(){function e(t,n,a){Object(te["a"])(this,e),this.endpoint=t,this.state_store=n,this.watchdog=a,this.source=null,this.connect()}return Object(ne["a"])(e,[{key:"connect",value:function(){var e=this;null!=this.source?(console.log("Reconnecting Server-Sent Events..."),this.source.close()):console.log("Connecting Server-Sent Events..."),this.source=new EventSource(this.endpoint),this.source.addEventListener("open",(function(e){return console.log("Events Connected")}),!1),this.source.addEventListener("error",(function(t){t.target.readyState!=EventSource.OPEN&&(console.log("Events Disconnected!"),e.reconnect_timer_id=setTimeout((function(){return e.connect()}),ie))}),!1),this.source.addEventListener("hw_app_state",(function(t){e.watchdog.reset();var n=JSON.parse(t.data);e.state_store.update_state(n)}),!1)}},{key:"disable_reconnect_and_watchdog",value:function(){clearTimeout(this.reconnect_timer_id),this.watchdog.disable()}}]),e}(),ce=function(){function e(t,n){Object(te["a"])(this,e),this.timeout_ms=t,this.disable_callback=n,this._triggered=!1}return Object(ne["a"])(e,[{key:"enable",value:function(){var e=this;this.timer_id=setTimeout((function(){e._triggered=!0,e.disable_callback(!0)}),this.timeout_ms)}},{key:"disable",value:function(){clearTimeout(this.timer_id),this._triggered&&(this._triggered=!1,this.disable_callback(!1))}},{key:"reset",value:function(){this.disable(),this.enable()}}]),e}(),re={debug:!1,updates_inhibited:!1,state:{frequency_min_hw:Number(),frequency_max_hw:Number(),dt_sum_max_hw:Number(),frequency_min:Number(),frequency_max:Number(),frequency:Number(),duty:Number(),lead_dt:Number(),lag_dt:Number(),power_pwm_active:Boolean(),current_limit:Number(),relay_ref_active:Boolean(),relay_dut_active:Boolean(),heatsink_temp:Number(),aux_temp:Number(),fan_active:Boolean(),fan_override:Boolean(),base_div:Number(),timer_div:Number(),drv_supply_active:Boolean(),drv_disabled:Boolean(),hw_oc_fault_present:Boolean(),hw_oc_fault_occurred:Boolean(),oneshot_len:Number()},update_state:function(e){this.debug&&console.log("update_state called with",e),this.updates_inhibited||Object.assign(this.state,e)}},ue={name:"EspAjaxLab",components:{EspAjaxLabMain:Y},data:function(){return{disabled:!0,view_updates_inhibited:re.updates_inhibited,state:re.state}},methods:{submit_cmd:function(e,t){this.request_generator.send_cmd(e,t)},inhibit_view_updates:function(){var e=this;this.view_updates_inhibited=!0,setTimeout((function(){return e.allow_view_updates()}),5e3)},allow_view_updates:function(){this.view_updates_inhibited=!1},set_disabled:function(e){this.disabled=e}},created:function(){var e=this;this.app_watchdog=new ce(1500,(function(t){return e.set_disabled(t)})),this.request_generator=new le("/cmd"),this.sse_handler=new se("/events",re,this.app_watchdog),document.addEventListener("input",(function(t){return e.inhibit_view_updates()})),document.addEventListener("blur",(function(t){return e.allow_view_updates()}))}};n("e4c8");ue.render=c;var be=ue,de=Object(a["b"])(be),oe=de.mount("#app");document.vm=oe,document.eal=oe.$refs.eal},"60cf":function(e,t,n){},"660b":function(e,t,n){},"9b19":function(e,t,n){e.exports=n.p+"img/logo.svg"},e4c8:function(e,t,n){"use strict";n("60cf")},ffb3:function(e,t,n){"use strict";n("660b")}});
//# sourceMappingURL=app.js.map