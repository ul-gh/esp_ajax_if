<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ESP-AJAX-Lab: src/ps_pwm.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ESP-AJAX-Lab
   &#160;<span id="projectnumber">1.0-rc</span>
   </div>
   <div id="projectbrief">HTTP server, AJAX API backend, web application and Soc hardware drivers for WiFi remote control of the MCPWM hardware modules on the Espressif ESP32 SoC</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ps_pwm.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Driver for the MCPWM hardware modules on the Espressif ESP32 SoC for generating a Phase-Shift-PWM waveform between two pairs of hardware pins.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &quot;driver/mcpwm.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ps_pwm.h:</div>
<div class="dyncontent">
<div class="center"><img src="ps__pwm_8h__incl.png" border="0" usemap="#src_2ps__pwm_8h" alt=""/></div>
<map name="src_2ps__pwm_8h" id="src_2ps__pwm_8h">
<area shape="rect" title="Driver for the MCPWM hardware modules on the Espressif ESP32 SoC for generating a Phase&#45;Shift&#45;PWM wav..." alt="" coords="55,5,166,32"/>
<area shape="rect" title=" " alt="" coords="5,80,88,107"/>
<area shape="rect" title=" " alt="" coords="112,80,240,107"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="ps__pwm_8h__dep__incl.png" border="0" usemap="#src_2ps__pwm_8hdep" alt=""/></div>
<map name="src_2ps__pwm_8hdep" id="src_2ps__pwm_8hdep">
<area shape="rect" title="Driver for the MCPWM hardware modules on the Espressif ESP32 SoC for generating a Phase&#45;Shift&#45;PWM wav..." alt="" coords="43,5,153,32"/>
<area shape="rect" href="app__state__model_8hpp.html" title=" " alt="" coords="5,80,191,107"/>
<area shape="rect" href="app__controller_8hpp.html" title="Application Controller Implementing C++ and HTTP GET API." alt="" coords="15,155,181,181"/>
<area shape="rect" href="app__main_8cpp.html" title="ESP&#45;AJAX&#45;Lab HTTP server, AJAX API backend, web application and Soc hardware drivers for WiFi remote ..." alt="" coords="30,229,166,256"/>
</map>
</div>
</div>
<p><a href="ps__pwm_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpspwm__setpoint__t.html">pspwm_setpoint_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpspwm__clk__conf__t.html">pspwm_clk_conf_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpspwm__setpoint__limits__t.html">pspwm_setpoint_limits_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a3d6fc867425bdc69a4f6f20165348ba1"><td class="memItemLeft" align="right" valign="top"><a id="a3d6fc867425bdc69a4f6f20165348ba1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PS_PWM_LOG_LEVEL</b>&#160;&#160;&#160;ESP_LOG_INFO</td></tr>
<tr class="separator:a3d6fc867425bdc69a4f6f20165348ba1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8797701ac9b4def93778bf0adae4732c"><td class="memItemLeft" align="right" valign="top"><a id="a8797701ac9b4def93778bf0adae4732c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MCPWM_INPUT_CLK</b>&#160;&#160;&#160;160000000</td></tr>
<tr class="separator:a8797701ac9b4def93778bf0adae4732c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b0dd1bc9e7f45ae1c94bc276947a03f"><td class="memItemLeft" align="right" valign="top"><a id="a4b0dd1bc9e7f45ae1c94bc276947a03f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BASE_CLK_PRESCALE_DEFAULT</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a4b0dd1bc9e7f45ae1c94bc276947a03f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ae5e16ad77ce7cb8bd077d9d057fd64"><td class="memItemLeft" align="right" valign="top"><a id="a2ae5e16ad77ce7cb8bd077d9d057fd64"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>TIMER_CLK_PRESCALE_DEFAULT</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a2ae5e16ad77ce7cb8bd077d9d057fd64"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa6ca9a43a7cfab98e5290c67fbbbe2a1"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps__pwm_8h.html#aa6ca9a43a7cfab98e5290c67fbbbe2a1">pspwm_up_ctr_mode_init</a> (mcpwm_unit_t mcpwm_num, const int gpio_lead_a, const int gpio_lead_b, const int gpio_lag_a, const int gpio_lag_b, const float frequency, const float ps_duty, const float lead_red, const float lead_fed, const float lag_red, const float lag_fed, const bool output_enabled, mcpwm_action_on_pwmxa_t disable_action_lead_leg, mcpwm_action_on_pwmxa_t disable_action_lag_leg)</td></tr>
<tr class="memdesc:aa6ca9a43a7cfab98e5290c67fbbbe2a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set up the PS-PWM generator module for up-counting mode, allowing individual dead-time values for rising and falling edges for both lead and lag output pairs.  <a href="ps__pwm_8h.html#aa6ca9a43a7cfab98e5290c67fbbbe2a1">More...</a><br /></td></tr>
<tr class="separator:aa6ca9a43a7cfab98e5290c67fbbbe2a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b9767deec7d7ca3327922e0f010bd30"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps__pwm_8h.html#a1b9767deec7d7ca3327922e0f010bd30">pspwm_up_ctr_mode_init_compat</a> (mcpwm_unit_t mcpwm_num, const int gpio_lead_a, const int gpio_lead_b, const int gpio_lag_a, const int gpio_lag_b, const float frequency, const float ps_duty, const float lead_dt, const float lag_dt, const bool output_enabled, mcpwm_action_on_pwmxa_t disable_action_lead_leg, mcpwm_action_on_pwmxa_t disable_action_lag_leg)</td></tr>
<tr class="memdesc:a1b9767deec7d7ca3327922e0f010bd30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shortcut version of <a class="el" href="ps__pwm_8h.html#aa6ca9a43a7cfab98e5290c67fbbbe2a1" title="Set up the PS-PWM generator module for up-counting mode, allowing individual dead-time values for ris...">pspwm_up_ctr_mode_init()</a> with identical rising and falling edge dead times applied for each of lead and lag leg.  <a href="ps__pwm_8h.html#a1b9767deec7d7ca3327922e0f010bd30">More...</a><br /></td></tr>
<tr class="separator:a1b9767deec7d7ca3327922e0f010bd30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e3f48e28063050d0fbeaaa03cee28c5"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps__pwm_8h.html#a7e3f48e28063050d0fbeaaa03cee28c5">pspwm_up_ctr_mode_set_frequency</a> (mcpwm_unit_t mcpwm_num, const float frequency)</td></tr>
<tr class="memdesc:a7e3f48e28063050d0fbeaaa03cee28c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set frequency when running PS-PWM generator in up-counting mode.  <a href="ps__pwm_8h.html#a7e3f48e28063050d0fbeaaa03cee28c5">More...</a><br /></td></tr>
<tr class="separator:a7e3f48e28063050d0fbeaaa03cee28c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fb014bf49a32018b32cfd6b881f4c34"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps__pwm_8h.html#a7fb014bf49a32018b32cfd6b881f4c34">pspwm_up_ctr_mode_set_deadtimes</a> (mcpwm_unit_t mcpwm_num, const float lead_red, const float lead_fed, const float lag_red, const float lag_fed)</td></tr>
<tr class="memdesc:a7fb014bf49a32018b32cfd6b881f4c34"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set deadtime values individually for leading leg rising and falling edge as well as for lagging leg rising and falling edge for all four PWM outputs.  <a href="ps__pwm_8h.html#a7fb014bf49a32018b32cfd6b881f4c34">More...</a><br /></td></tr>
<tr class="separator:a7fb014bf49a32018b32cfd6b881f4c34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2f5fa4c88683787b8a56288c4e6271f"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps__pwm_8h.html#ac2f5fa4c88683787b8a56288c4e6271f">pspwm_up_ctr_mode_set_deadtimes_compat</a> (mcpwm_unit_t mcpwm_num, const float lead_dt, const float lag_dt)</td></tr>
<tr class="memdesc:ac2f5fa4c88683787b8a56288c4e6271f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shortcut version of <a class="el" href="ps__pwm_8h.html#a7fb014bf49a32018b32cfd6b881f4c34" title="Set deadtime values individually for leading leg rising and falling edge as well as for lagging leg r...">pspwm_up_ctr_mode_set_deadtimes()</a> with identical rising and falling edge dead times applied for each of lead and lag leg.  <a href="ps__pwm_8h.html#ac2f5fa4c88683787b8a56288c4e6271f">More...</a><br /></td></tr>
<tr class="separator:ac2f5fa4c88683787b8a56288c4e6271f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a445bb8526a64fba0bc7a206b9c74032b"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps__pwm_8h.html#a445bb8526a64fba0bc7a206b9c74032b">pspwm_up_ctr_mode_set_ps_duty</a> (mcpwm_unit_t mcpwm_num, const float ps_duty)</td></tr>
<tr class="memdesc:a445bb8526a64fba0bc7a206b9c74032b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set PS-PWM phase shift between lead and lag leg output pairs.  <a href="ps__pwm_8h.html#a445bb8526a64fba0bc7a206b9c74032b">More...</a><br /></td></tr>
<tr class="separator:a445bb8526a64fba0bc7a206b9c74032b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24ba28654d2cf36bd62e92eb41354402"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps__pwm_8h.html#a24ba28654d2cf36bd62e92eb41354402">pspwm_up_down_ctr_mode_init</a> (mcpwm_unit_t mcpwm_num, const int gpio_lead_a, const int gpio_lead_b, const int gpio_lag_a, const int gpio_lag_b, const float frequency, const float ps_duty, const float lead_dt, const float lag_dt, const bool output_enabled, mcpwm_action_on_pwmxa_t disable_action_lead_leg, mcpwm_action_on_pwmxa_t disable_action_lag_leg)</td></tr>
<tr class="memdesc:a24ba28654d2cf36bd62e92eb41354402"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set up the PS-PWM generator module for up-down-counting mode, which assures identical ON times for high side and low side outputs of each leg.  <a href="ps__pwm_8h.html#a24ba28654d2cf36bd62e92eb41354402">More...</a><br /></td></tr>
<tr class="separator:a24ba28654d2cf36bd62e92eb41354402"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab29d98ceed348ebe5c7e5f6b3565a5cf"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps__pwm_8h.html#ab29d98ceed348ebe5c7e5f6b3565a5cf">pspwm_up_down_ctr_mode_set_frequency</a> (mcpwm_unit_t mcpwm_num, const float frequency)</td></tr>
<tr class="memdesc:ab29d98ceed348ebe5c7e5f6b3565a5cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set frequency (and update dead-time values) for both output pairs signals of the phase-shift-PWM when using the timer in up/down counting mode.  <a href="ps__pwm_8h.html#ab29d98ceed348ebe5c7e5f6b3565a5cf">More...</a><br /></td></tr>
<tr class="separator:ab29d98ceed348ebe5c7e5f6b3565a5cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41f4854e6a52c579fcc137df2be74142"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps__pwm_8h.html#a41f4854e6a52c579fcc137df2be74142">pspwm_up_down_ctr_mode_set_deadtimes</a> (mcpwm_unit_t mcpwm_num, const float lead_dt, const float lag_dt)</td></tr>
<tr class="memdesc:a41f4854e6a52c579fcc137df2be74142"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set dead-time values for both output pairs of the phase-shift-PWM when using the timer in up/down counting mode.  <a href="ps__pwm_8h.html#a41f4854e6a52c579fcc137df2be74142">More...</a><br /></td></tr>
<tr class="separator:a41f4854e6a52c579fcc137df2be74142"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf6bfbd819bdf20c4148797a8477ca43"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps__pwm_8h.html#aaf6bfbd819bdf20c4148797a8477ca43">pspwm_up_down_ctr_mode_set_ps_duty</a> (mcpwm_unit_t mcpwm_num, const float ps_duty)</td></tr>
<tr class="memdesc:aaf6bfbd819bdf20c4148797a8477ca43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set PS-PWM phase shift between the two output pairs based on the current period time setting as stored in the PWM hardware "period" register.  <a href="ps__pwm_8h.html#aaf6bfbd819bdf20c4148797a8477ca43">More...</a><br /></td></tr>
<tr class="separator:aaf6bfbd819bdf20c4148797a8477ca43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9324368d1cd7d3e8f0c0fa4d7e1b5bb1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps__pwm_8h.html#a9324368d1cd7d3e8f0c0fa4d7e1b5bb1">pspwm_get_hw_fault_shutdown_present</a> (mcpwm_unit_t mcpwm_num)</td></tr>
<tr class="memdesc:a9324368d1cd7d3e8f0c0fa4d7e1b5bb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true while the hardware fault shutdown pin is active i.e. for as long as the failure is still present.  <a href="ps__pwm_8h.html#a9324368d1cd7d3e8f0c0fa4d7e1b5bb1">More...</a><br /></td></tr>
<tr class="separator:a9324368d1cd7d3e8f0c0fa4d7e1b5bb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a901715fdd774356f15e8dfca890a7a3b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps__pwm_8h.html#a901715fdd774356f15e8dfca890a7a3b">pspwm_get_hw_fault_shutdown_occurred</a> (mcpwm_unit_t mcpwm_num)</td></tr>
<tr class="memdesc:a901715fdd774356f15e8dfca890a7a3b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true when the hardware fault shutdown pin has been activated.  <a href="ps__pwm_8h.html#a901715fdd774356f15e8dfca890a7a3b">More...</a><br /></td></tr>
<tr class="separator:a901715fdd774356f15e8dfca890a7a3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad33f497fe3be5cbe41ae918fb775512f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps__pwm_8h.html#ad33f497fe3be5cbe41ae918fb775512f">pspwm_clear_hw_fault_shutdown_occurred</a> (mcpwm_unit_t mcpwm_num)</td></tr>
<tr class="memdesc:ad33f497fe3be5cbe41ae918fb775512f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the fault shutdown active flag without re-enabling the output.  <a href="ps__pwm_8h.html#ad33f497fe3be5cbe41ae918fb775512f">More...</a><br /></td></tr>
<tr class="separator:ad33f497fe3be5cbe41ae918fb775512f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c3c611469c41ed1ae07c55360d5b490"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps__pwm_8h.html#a9c3c611469c41ed1ae07c55360d5b490">pspwm_disable_output</a> (mcpwm_unit_t mcpwm_num)</td></tr>
<tr class="memdesc:a9c3c611469c41ed1ae07c55360d5b490"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable PWM output immediately by software-triggering the one-shot fault input of the "trip-zone" fault handler module.  <a href="ps__pwm_8h.html#a9c3c611469c41ed1ae07c55360d5b490">More...</a><br /></td></tr>
<tr class="separator:a9c3c611469c41ed1ae07c55360d5b490"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad72e8ec85dfbb20872a028695c9dde6f"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps__pwm_8h.html#ad72e8ec85dfbb20872a028695c9dde6f">pspwm_resync_enable_output</a> (mcpwm_unit_t mcpwm_num)</td></tr>
<tr class="memdesc:ad72e8ec85dfbb20872a028695c9dde6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">(Re-)enable PWM output by clearing fault handler one-shot trigger after software-triggering a re-sync to the initial phase setpoint.  <a href="ps__pwm_8h.html#ad72e8ec85dfbb20872a028695c9dde6f">More...</a><br /></td></tr>
<tr class="separator:ad72e8ec85dfbb20872a028695c9dde6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab72487b95590c7cf5bcfe9e4eb2ad43a"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps__pwm_8h.html#ab72487b95590c7cf5bcfe9e4eb2ad43a">pspwm_enable_hw_fault_shutdown</a> (mcpwm_unit_t mcpwm_num, const int gpio_fault_shutdown, mcpwm_fault_input_level_t fault_pin_active_level)</td></tr>
<tr class="memdesc:ab72487b95590c7cf5bcfe9e4eb2ad43a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable hardware fault shutdown ("tripzone") input on given GPIO pin.  <a href="ps__pwm_8h.html#ab72487b95590c7cf5bcfe9e4eb2ad43a">More...</a><br /></td></tr>
<tr class="separator:ab72487b95590c7cf5bcfe9e4eb2ad43a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a865fe5e36bfb4efa91224f3449ab44a1"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps__pwm_8h.html#a865fe5e36bfb4efa91224f3449ab44a1">pspwm_disable_hw_fault_shutdown</a> (mcpwm_unit_t mcpwm_num, const int gpio_fault_shutdown)</td></tr>
<tr class="memdesc:a865fe5e36bfb4efa91224f3449ab44a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable hardware fault shutdown pin, resetting the GPIO to default state.  <a href="ps__pwm_8h.html#a865fe5e36bfb4efa91224f3449ab44a1">More...</a><br /></td></tr>
<tr class="separator:a865fe5e36bfb4efa91224f3449ab44a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7047c0a9227bee351af307ac76fe703"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps__pwm_8h.html#ac7047c0a9227bee351af307ac76fe703">pspwm_get_setpoint_ptr</a> (mcpwm_unit_t mcpwm_num, <a class="el" href="structpspwm__setpoint__t.html">pspwm_setpoint_t</a> **setpoint)</td></tr>
<tr class="memdesc:ac7047c0a9227bee351af307ac76fe703"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read from PSPWM state the calculated setpoint into the given pointer to struct <a class="el" href="structpspwm__setpoint__t.html">pspwm_setpoint_t</a>.  <a href="ps__pwm_8h.html#ac7047c0a9227bee351af307ac76fe703">More...</a><br /></td></tr>
<tr class="separator:ac7047c0a9227bee351af307ac76fe703"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7932614270524046433c7993130a438"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps__pwm_8h.html#af7932614270524046433c7993130a438">pspwm_get_setpoint_limits_ptr</a> (mcpwm_unit_t mcpwm_num, <a class="el" href="structpspwm__setpoint__limits__t.html">pspwm_setpoint_limits_t</a> **setpoint_limits)</td></tr>
<tr class="memdesc:af7932614270524046433c7993130a438"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read from PSPWM state the calculated setpoint limits into the given pointer to struct <a class="el" href="structpspwm__setpoint__limits__t.html">pspwm_setpoint_limits_t</a>.  <a href="ps__pwm_8h.html#af7932614270524046433c7993130a438">More...</a><br /></td></tr>
<tr class="separator:af7932614270524046433c7993130a438"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a809a0e93057954966377291fee48376f"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps__pwm_8h.html#a809a0e93057954966377291fee48376f">pspwm_get_clk_conf_ptr</a> (mcpwm_unit_t mcpwm_num, <a class="el" href="structpspwm__clk__conf__t.html">pspwm_clk_conf_t</a> **clk_conf)</td></tr>
<tr class="memdesc:a809a0e93057954966377291fee48376f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read from PSPWM state the base clock and timer clock prescaler settings into the given pointer to struct <a class="el" href="structpspwm__clk__conf__t.html">pspwm_clk_conf_t</a>.  <a href="ps__pwm_8h.html#a809a0e93057954966377291fee48376f">More...</a><br /></td></tr>
<tr class="separator:a809a0e93057954966377291fee48376f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Driver for the MCPWM hardware modules on the Espressif ESP32 SoC for generating a Phase-Shift-PWM waveform between two pairs of hardware pins. </p>
<p>Application in power electronics, e.g. Zero-Voltage-Switching (ZVS) Full-Bridge-, Dual-Active-Bridge- and LLC converters.</p>
<dl class="section note"><dt>Note</dt><dd>This depends on the ESP-IDF SDK source files.</dd></dl>
<p>2020-02-27 Ulrich Lukas </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ad33f497fe3be5cbe41ae918fb775512f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad33f497fe3be5cbe41ae918fb775512f">&#9670;&nbsp;</a></span>pspwm_clear_hw_fault_shutdown_occurred()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pspwm_clear_hw_fault_shutdown_occurred </td>
          <td>(</td>
          <td class="paramtype">mcpwm_unit_t&#160;</td>
          <td class="paramname"><em>mcpwm_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resets the fault shutdown active flag without re-enabling the output. </p>
<p>If a hardware shutdown occurred, this flag must be reset first in order to re-enable the output. This acts as a safety feature. </p>

</div>
</div>
<a id="a865fe5e36bfb4efa91224f3449ab44a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a865fe5e36bfb4efa91224f3449ab44a1">&#9670;&nbsp;</a></span>pspwm_disable_hw_fault_shutdown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t pspwm_disable_hw_fault_shutdown </td>
          <td>(</td>
          <td class="paramtype">mcpwm_unit_t&#160;</td>
          <td class="paramname"><em>mcpwm_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>gpio_fault_shutdown</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable hardware fault shutdown pin, resetting the GPIO to default state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mcpwm_num</td><td>PWM unit number (enum, MCPWM_UNIT_0 = 0, MCPWM_UNIT_1 = 1), </td></tr>
    <tr><td class="paramname">gpio_fault_shutdown</td><td>GPIO pin number for shutdown input </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9c3c611469c41ed1ae07c55360d5b490"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c3c611469c41ed1ae07c55360d5b490">&#9670;&nbsp;</a></span>pspwm_disable_output()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t pspwm_disable_output </td>
          <td>(</td>
          <td class="paramtype">mcpwm_unit_t&#160;</td>
          <td class="paramname"><em>mcpwm_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable PWM output immediately by software-triggering the one-shot fault input of the "trip-zone" fault handler module. </p>
<p>This sets the PWM output pins to predefined levels TRIPZONE_ACTION_PWMxA and TRIPZONE_ACTION_PWMxB, which can be configured in the header file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mcpwm_num</td><td>PWM unit number (enum, MCPWM_UNIT_0 = 0, MCPWM_UNIT_1 = 1), </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab72487b95590c7cf5bcfe9e4eb2ad43a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab72487b95590c7cf5bcfe9e4eb2ad43a">&#9670;&nbsp;</a></span>pspwm_enable_hw_fault_shutdown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t pspwm_enable_hw_fault_shutdown </td>
          <td>(</td>
          <td class="paramtype">mcpwm_unit_t&#160;</td>
          <td class="paramname"><em>mcpwm_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>gpio_fault_shutdown</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mcpwm_fault_input_level_t&#160;</td>
          <td class="paramname"><em>fault_pin_active_level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable hardware fault shutdown ("tripzone") input on given GPIO pin. </p>
<p>This registers the fault handler FH0 signal with the specified PWM unit. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mcpwm_num</td><td>PWM unit number (enum, MCPWM_UNIT_0 = 0, MCPWM_UNIT_1 = 1), </td></tr>
    <tr><td class="paramname">gpio_fault_shutdown</td><td>GPIO pin number for shutdown input </td></tr>
    <tr><td class="paramname">fault_pin_active_level</td><td>Logic level setting the fault condition [MCPWM_LOW_LEVEL_TGR | MCPWM_HIGH_LEVEL_TGR] </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a809a0e93057954966377291fee48376f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a809a0e93057954966377291fee48376f">&#9670;&nbsp;</a></span>pspwm_get_clk_conf_ptr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t pspwm_get_clk_conf_ptr </td>
          <td>(</td>
          <td class="paramtype">mcpwm_unit_t&#160;</td>
          <td class="paramname"><em>mcpwm_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpspwm__clk__conf__t.html">pspwm_clk_conf_t</a> **&#160;</td>
          <td class="paramname"><em>clk_conf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read from PSPWM state the base clock and timer clock prescaler settings into the given pointer to struct <a class="el" href="structpspwm__clk__conf__t.html">pspwm_clk_conf_t</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mcpwm_num</td><td>PWM unit number (enum, MCPWM_UNIT_0 = 0, MCPWM_UNIT_1 = 1), </td></tr>
    <tr><td class="paramname">clk_conf</td><td>Pointer to a struct instance of <a class="el" href="structpspwm__setpoint__t.html">pspwm_setpoint_t</a> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a901715fdd774356f15e8dfca890a7a3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a901715fdd774356f15e8dfca890a7a3b">&#9670;&nbsp;</a></span>pspwm_get_hw_fault_shutdown_occurred()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool pspwm_get_hw_fault_shutdown_occurred </td>
          <td>(</td>
          <td class="paramtype">mcpwm_unit_t&#160;</td>
          <td class="paramname"><em>mcpwm_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true when the hardware fault shutdown pin has been activated. </p>
<p>The state remains true (shutdown activated) as long as hw status has not been cleared by a call to <a class="el" href="ps__pwm_8h.html#ad33f497fe3be5cbe41ae918fb775512f" title="Resets the fault shutdown active flag without re-enabling the output.">pspwm_clear_hw_fault_shutdown_occurred()</a>. </p>

</div>
</div>
<a id="a9324368d1cd7d3e8f0c0fa4d7e1b5bb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9324368d1cd7d3e8f0c0fa4d7e1b5bb1">&#9670;&nbsp;</a></span>pspwm_get_hw_fault_shutdown_present()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool pspwm_get_hw_fault_shutdown_present </td>
          <td>(</td>
          <td class="paramtype">mcpwm_unit_t&#160;</td>
          <td class="paramname"><em>mcpwm_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true while the hardware fault shutdown pin is active i.e. for as long as the failure is still present. </p>

</div>
</div>
<a id="af7932614270524046433c7993130a438"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7932614270524046433c7993130a438">&#9670;&nbsp;</a></span>pspwm_get_setpoint_limits_ptr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t pspwm_get_setpoint_limits_ptr </td>
          <td>(</td>
          <td class="paramtype">mcpwm_unit_t&#160;</td>
          <td class="paramname"><em>mcpwm_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpspwm__setpoint__limits__t.html">pspwm_setpoint_limits_t</a> **&#160;</td>
          <td class="paramname"><em>setpoint_limits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read from PSPWM state the calculated setpoint limits into the given pointer to struct <a class="el" href="structpspwm__setpoint__limits__t.html">pspwm_setpoint_limits_t</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mcpwm_num</td><td>PWM unit number (enum, MCPWM_UNIT_0 = 0, MCPWM_UNIT_1 = 1), </td></tr>
    <tr><td class="paramname">setpoint_limits</td><td>Pointer to a struct instance of <a class="el" href="structpspwm__setpoint__limits__t.html">pspwm_setpoint_limits_t</a> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac7047c0a9227bee351af307ac76fe703"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7047c0a9227bee351af307ac76fe703">&#9670;&nbsp;</a></span>pspwm_get_setpoint_ptr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t pspwm_get_setpoint_ptr </td>
          <td>(</td>
          <td class="paramtype">mcpwm_unit_t&#160;</td>
          <td class="paramname"><em>mcpwm_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpspwm__setpoint__t.html">pspwm_setpoint_t</a> **&#160;</td>
          <td class="paramname"><em>setpoint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read from PSPWM state the calculated setpoint into the given pointer to struct <a class="el" href="structpspwm__setpoint__t.html">pspwm_setpoint_t</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mcpwm_num</td><td>PWM unit number (enum, MCPWM_UNIT_0 = 0, MCPWM_UNIT_1 = 1), </td></tr>
    <tr><td class="paramname">setpoint</td><td>Pointer to a struct instance of <a class="el" href="structpspwm__setpoint__t.html">pspwm_setpoint_t</a> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad72e8ec85dfbb20872a028695c9dde6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad72e8ec85dfbb20872a028695c9dde6f">&#9670;&nbsp;</a></span>pspwm_resync_enable_output()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t pspwm_resync_enable_output </td>
          <td>(</td>
          <td class="paramtype">mcpwm_unit_t&#160;</td>
          <td class="paramname"><em>mcpwm_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>(Re-)enable PWM output by clearing fault handler one-shot trigger after software-triggering a re-sync to the initial phase setpoint. </p>
<p>If a hardware shutdown occurred, the shutdown flag must be reset first by calling <a class="el" href="ps__pwm_8h.html#ad33f497fe3be5cbe41ae918fb775512f" title="Resets the fault shutdown active flag without re-enabling the output.">pspwm_clear_hw_fault_shutdown_occurred()</a> in order to be able to re-enable the output. This acts as a safety feature.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mcpwm_num</td><td>PWM unit number (enum, MCPWM_UNIT_0 = 0, MCPWM_UNIT_1 = 1), </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa6ca9a43a7cfab98e5290c67fbbbe2a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6ca9a43a7cfab98e5290c67fbbbe2a1">&#9670;&nbsp;</a></span>pspwm_up_ctr_mode_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t pspwm_up_ctr_mode_init </td>
          <td>(</td>
          <td class="paramtype">mcpwm_unit_t&#160;</td>
          <td class="paramname"><em>mcpwm_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>gpio_lead_a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>gpio_lead_b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>gpio_lag_a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>gpio_lag_b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>frequency</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>ps_duty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>lead_red</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>lead_fed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>lag_red</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>lag_fed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>output_enabled</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mcpwm_action_on_pwmxa_t&#160;</td>
          <td class="paramname"><em>disable_action_lead_leg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mcpwm_action_on_pwmxa_t&#160;</td>
          <td class="paramname"><em>disable_action_lag_leg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set up the PS-PWM generator module for up-counting mode, allowing individual dead-time values for rising and falling edges for both lead and lag output pairs. </p>
<p>FULL-SPEED-MODE, 4x INDIVIDUAL DEAD-TIME, HW-DEAD-TIME-MODULE</p>
<p>To achieve this, this uses the hardware dead-band generator while also calculating and setting complementary timing values for the PWM operator compare registers.</p>
<p>Combined output waveform of the phase-shifted full-bridge is DC-free symmetric nevertheless.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mcpwm_num</td><td>PWM unit number (enum, MCPWM_UNIT_0 = 0, MCPWM_UNIT_1 = 1), </td></tr>
    <tr><td class="paramname">gpio_lead_a</td><td>GPIO number leading leg low_side </td></tr>
    <tr><td class="paramname">gpio_lead_b</td><td>GPIO number leading leg high_side </td></tr>
    <tr><td class="paramname">gpio_lag_a</td><td>GPIO number lagging leg low_side </td></tr>
    <tr><td class="paramname">gpio_lag_b</td><td>GPIO number lagging leg high_side </td></tr>
    <tr><td class="paramname">frequency</td><td>Frequency of the non-rectified waveform in Hz, </td></tr>
    <tr><td class="paramname">ps_duty</td><td>Duty cycle of the rectified waveform (0..1) </td></tr>
    <tr><td class="paramname">lead_red</td><td>dead time value for rising edge, leading leg </td></tr>
    <tr><td class="paramname">lead_fed</td><td>dead time value for falling edge, leading leg </td></tr>
    <tr><td class="paramname">lag_red</td><td>dead time value for rising edge, lagging leg </td></tr>
    <tr><td class="paramname">lag_fed</td><td>dead time value for falling edge, lagging leg </td></tr>
    <tr><td class="paramname">output_enabled</td><td>initial output state (true &lt;==&gt; ON) </td></tr>
    <tr><td class="paramname">disable_action_lead_leg</td><td>Choice of actions when lead bridge leg is disabled (See typedef for mcpwm_action_on_pwmxa_t) </td></tr>
    <tr><td class="paramname">disable_action_lag_leg</td><td>Same for lag leg </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1b9767deec7d7ca3327922e0f010bd30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b9767deec7d7ca3327922e0f010bd30">&#9670;&nbsp;</a></span>pspwm_up_ctr_mode_init_compat()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t pspwm_up_ctr_mode_init_compat </td>
          <td>(</td>
          <td class="paramtype">mcpwm_unit_t&#160;</td>
          <td class="paramname"><em>mcpwm_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>gpio_lead_a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>gpio_lead_b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>gpio_lag_a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>gpio_lag_b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>frequency</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>ps_duty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>lead_dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>lag_dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>output_enabled</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mcpwm_action_on_pwmxa_t&#160;</td>
          <td class="paramname"><em>disable_action_lead_leg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mcpwm_action_on_pwmxa_t&#160;</td>
          <td class="paramname"><em>disable_action_lag_leg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Shortcut version of <a class="el" href="ps__pwm_8h.html#aa6ca9a43a7cfab98e5290c67fbbbe2a1" title="Set up the PS-PWM generator module for up-counting mode, allowing individual dead-time values for ris...">pspwm_up_ctr_mode_init()</a> with identical rising and falling edge dead times applied for each of lead and lag leg. </p>
<p>This is for compatibility with the call signature of up_down_ctr_mode API. </p>

</div>
</div>
<a id="a7fb014bf49a32018b32cfd6b881f4c34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fb014bf49a32018b32cfd6b881f4c34">&#9670;&nbsp;</a></span>pspwm_up_ctr_mode_set_deadtimes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t pspwm_up_ctr_mode_set_deadtimes </td>
          <td>(</td>
          <td class="paramtype">mcpwm_unit_t&#160;</td>
          <td class="paramname"><em>mcpwm_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>lead_red</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>lead_fed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>lag_red</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>lag_fed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set deadtime values individually for leading leg rising and falling edge as well as for lagging leg rising and falling edge for all four PWM outputs. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mcpwm_num</td><td>PWM unit number (enum, MCPWM_UNIT_0 = 0, MCPWM_UNIT_1 = 1), </td></tr>
    <tr><td class="paramname">lead_red</td><td>dead time value for rising edge, leading leg </td></tr>
    <tr><td class="paramname">lead_fed</td><td>dead time value for falling edge, leading leg </td></tr>
    <tr><td class="paramname">lag_red</td><td>dead time value for rising edge, lagging leg </td></tr>
    <tr><td class="paramname">lag_fed</td><td>dead time value for falling edge, lagging leg </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac2f5fa4c88683787b8a56288c4e6271f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2f5fa4c88683787b8a56288c4e6271f">&#9670;&nbsp;</a></span>pspwm_up_ctr_mode_set_deadtimes_compat()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t pspwm_up_ctr_mode_set_deadtimes_compat </td>
          <td>(</td>
          <td class="paramtype">mcpwm_unit_t&#160;</td>
          <td class="paramname"><em>mcpwm_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>lead_dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>lag_dt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Shortcut version of <a class="el" href="ps__pwm_8h.html#a7fb014bf49a32018b32cfd6b881f4c34" title="Set deadtime values individually for leading leg rising and falling edge as well as for lagging leg r...">pspwm_up_ctr_mode_set_deadtimes()</a> with identical rising and falling edge dead times applied for each of lead and lag leg. </p>
<p>This is for compatibility with the call signature of up_down_ctr_mode API. </p>

</div>
</div>
<a id="a7e3f48e28063050d0fbeaaa03cee28c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e3f48e28063050d0fbeaaa03cee28c5">&#9670;&nbsp;</a></span>pspwm_up_ctr_mode_set_frequency()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t pspwm_up_ctr_mode_set_frequency </td>
          <td>(</td>
          <td class="paramtype">mcpwm_unit_t&#160;</td>
          <td class="paramname"><em>mcpwm_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>frequency</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set frequency when running PS-PWM generator in up-counting mode. </p>
<dl class="section note"><dt>Note</dt><dd>This does not alter prescaler settings.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mcpwm_num</td><td>PWM unit number (enum, MCPWM_UNIT_0 = 0, MCPWM_UNIT_1 = 1), </td></tr>
    <tr><td class="paramname">frequency</td><td>Frequency of the non-rectified waveform in Hz, </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a445bb8526a64fba0bc7a206b9c74032b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a445bb8526a64fba0bc7a206b9c74032b">&#9670;&nbsp;</a></span>pspwm_up_ctr_mode_set_ps_duty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t pspwm_up_ctr_mode_set_ps_duty </td>
          <td>(</td>
          <td class="paramtype">mcpwm_unit_t&#160;</td>
          <td class="paramname"><em>mcpwm_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>ps_duty</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set PS-PWM phase shift between lead and lag leg output pairs. </p>
<p>This is expressed in units of one where 1.0 means 180° phase-shift for the output pairs, giving maximum duty cycle after rectification. </p><dl class="section note"><dt>Note</dt><dd>The value is calculated based on current value of the PWM timer "period" register.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mcpwm_num</td><td>PWM unit number (enum, MCPWM_UNIT_0 = 0, MCPWM_UNIT_1 = 1), </td></tr>
    <tr><td class="paramname">ps_duty</td><td>Duty cycle of the rectified waveform (0..1) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a24ba28654d2cf36bd62e92eb41354402"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24ba28654d2cf36bd62e92eb41354402">&#9670;&nbsp;</a></span>pspwm_up_down_ctr_mode_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t pspwm_up_down_ctr_mode_init </td>
          <td>(</td>
          <td class="paramtype">mcpwm_unit_t&#160;</td>
          <td class="paramname"><em>mcpwm_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>gpio_lead_a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>gpio_lead_b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>gpio_lag_a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>gpio_lag_b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>frequency</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>ps_duty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>lead_dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>lag_dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>output_enabled</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mcpwm_action_on_pwmxa_t&#160;</td>
          <td class="paramname"><em>disable_action_lead_leg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mcpwm_action_on_pwmxa_t&#160;</td>
          <td class="paramname"><em>disable_action_lag_leg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set up the PS-PWM generator module for up-down-counting mode, which assures identical ON times for high side and low side outputs of each leg. </p>
<p>Individual dead-times both half-bridge PWM outputs are still possible.</p>
<p>This PWM generation mode does not use the dead-band generator hardware. Instead, the dead-time for each two outputs of a half-bridge is configured by running the main timers in up-down-counting mode and using both compare registers for each timer to generate two symmetric outputs.</p>
<p>Because of the up/down-counting mode, maximum output frequency is half of the value which is possible when using the hardware dead-band generator.</p>
<dl class="section note"><dt>Note</dt><dd>When using this mode, it is NOT SAFE to change the frequency, phase shift duty or dead-time setpoints during operation as timer compare events could be missed, causing invalid output waveforms for up to one timer period. THIS WILL CAUSE SHORT-CIRCUITS for bridge output stages!</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mcpwm_num</td><td>PWM unit number (enum, MCPWM_UNIT_0 = 0, MCPWM_UNIT_1 = 1), </td></tr>
    <tr><td class="paramname">gpio_lead_a</td><td>GPIO number leading leg low_side </td></tr>
    <tr><td class="paramname">gpio_lead_b</td><td>GPIO number leading leg high_side </td></tr>
    <tr><td class="paramname">gpio_lag_a</td><td>GPIO number lagging leg low_side </td></tr>
    <tr><td class="paramname">gpio_lag_b</td><td>GPIO number lagging leg high_side </td></tr>
    <tr><td class="paramname">frequency</td><td>Frequency of the non-rectified waveform in Hz, </td></tr>
    <tr><td class="paramname">ps_duty</td><td>Duty cycle of the rectified waveform (0..1) </td></tr>
    <tr><td class="paramname">lead_dt</td><td>leading bridge-leg dead-time in sec (0..), </td></tr>
    <tr><td class="paramname">lag_dt</td><td>lagging bridge-leg dead-time in sec (0..) </td></tr>
    <tr><td class="paramname">output_enabled</td><td>initial output state (true &lt;==&gt; ON) </td></tr>
    <tr><td class="paramname">disable_action_lead_leg</td><td>Choice of actions when lead bridge leg is disabled (See typedef for mcpwm_action_on_pwmxa_t) </td></tr>
    <tr><td class="paramname">disable_action_lag_leg</td><td>Same for lag leg </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a41f4854e6a52c579fcc137df2be74142"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41f4854e6a52c579fcc137df2be74142">&#9670;&nbsp;</a></span>pspwm_up_down_ctr_mode_set_deadtimes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t pspwm_up_down_ctr_mode_set_deadtimes </td>
          <td>(</td>
          <td class="paramtype">mcpwm_unit_t&#160;</td>
          <td class="paramname"><em>mcpwm_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>lead_dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>lag_dt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set dead-time values for both output pairs of the phase-shift-PWM when using the timer in up/down counting mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mcpwm_num</td><td>PWM unit number (enum, MCPWM_UNIT_0 = 0, MCPWM_UNIT_1 = 1), </td></tr>
    <tr><td class="paramname">lead_dt</td><td>leading bridge-leg dead-time in sec (0..), </td></tr>
    <tr><td class="paramname">lag_dt</td><td>lagging bridge-leg dead-time in sec (0..) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab29d98ceed348ebe5c7e5f6b3565a5cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab29d98ceed348ebe5c7e5f6b3565a5cf">&#9670;&nbsp;</a></span>pspwm_up_down_ctr_mode_set_frequency()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t pspwm_up_down_ctr_mode_set_frequency </td>
          <td>(</td>
          <td class="paramtype">mcpwm_unit_t&#160;</td>
          <td class="paramname"><em>mcpwm_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>frequency</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set frequency (and update dead-time values) for both output pairs signals of the phase-shift-PWM when using the timer in up/down counting mode. </p>
<p>Because of the up/down-counting mode, maximum output frequency is half of the value which is possible when using the hardware dead-band generator.</p>
<dl class="section note"><dt>Note</dt><dd>This does not alter prescaler settings.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mcpwm_num</td><td>PWM unit number (enum, MCPWM_UNIT_0 = 0, MCPWM_UNIT_1 = 1), </td></tr>
    <tr><td class="paramname">frequency</td><td>Frequency of the non-rectified waveform in Hz, </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aaf6bfbd819bdf20c4148797a8477ca43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf6bfbd819bdf20c4148797a8477ca43">&#9670;&nbsp;</a></span>pspwm_up_down_ctr_mode_set_ps_duty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t pspwm_up_down_ctr_mode_set_ps_duty </td>
          <td>(</td>
          <td class="paramtype">mcpwm_unit_t&#160;</td>
          <td class="paramname"><em>mcpwm_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>ps_duty</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set PS-PWM phase shift between the two output pairs based on the current period time setting as stored in the PWM hardware "period" register. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mcpwm_num</td><td>PWM unit number (enum, MCPWM_UNIT_0 = 0, MCPWM_UNIT_1 = 1), </td></tr>
    <tr><td class="paramname">ps_duty</td><td>Duty cycle of the rectified waveform (0..1) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
